# 取引割当一覧 詳細仕様書

## 画面構成：3ペイン切り替え式

### ペイン1：助成金/予算項目一覧
- 助成金と予算項目をツリー表示
- 選択した予算項目を記憶（一括割当用）
- 助成金の残額表示
- 助成金の期間表示（色分けの基準）

### ペイン2：取引一覧（メイン）
- **必須機能**：
  - ソート（日付、金額、仕訳番号など）
  - フィルター（保存可能）
  - チェックボックスで複数選択
  - インライン編集で個別割当変更
- **表示項目**：
  - 基本情報（日付、仕訳番号、摘要、金額など）
  - 割当情報（割当先、割当金額）
  - 分割割当の場合は別行で表示（明細ID_2のような形）
- **合計表示**：
  - チェックした取引の合計額
  - フィルター適用後の全取引合計額

### ペイン3：取引明細
- 選択した取引の詳細情報
- 添付ファイル表示
- 分割割当の編集機能

## 一括割当フロー
1. ペイン1で予算項目を選択
2. ペイン2で取引をチェック
3. 一括割当ボタン → 自動で割当金額入力
4. 確認 → 実行

## デザイン方針
- コンパクト表示（マージン最小）
- データ密度を高く
- 「未割当」等のラベルは使わず空欄
- 件数表示は控えめに

## 色分けルール
- 助成金の期間と残額で決定
- （具体的なルールは要確認）

## 技術要件
- 画面リフレッシュなし（SPA的動作）
- 状態保持（フィルター、選択状態など）
- データグリッドライブラリ使用（Tabulator推奨）

## 禁止事項
- 自動判断・パターン認識
- パーセント指定
- HTMLテーブルでの実装
- 画面リフレッシュで状態クリア